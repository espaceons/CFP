{% extends 'base.html' %}

{% block title %}
  {{ titre_page }}
{% endblock %}

{% block content %}
  <div class="container mt-4">
    <h1 class="mb-4 border-bottom pb-2">{{ titre_page }}</h1>

    {# Optionnel: Bouton pour ajouter (si l'utilisateur a les permissions) #}
    {% if request.user.is_staff or request.user.is_superuser %}
      <a href="{% url 'gestion_users:formateur_create' %}" class="btn btn-success mb-3"><i class="fas fa-user-plus me-1"></i> Ajouter un Formateur</a>
    {% endif %}

    {% if instructor_list %}
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
          <thead class="table-dark">
            <tr>
              <th>Photo</th>
              <th>Nom complet</th>
              <th>Email</th>
              <th>Spécialité</th>
              <th class="text-center">Détails</th>
            </tr>
          </thead>
          <tbody>
            {% for instructor in instructor_list %}
              <tr>
                <td>
                  {# Affichage conditionnel de la photo de profil #}
                  {% if instructor.user.photo %}
                    <img src="{{ instructor.CustomUser.photo.url }}" alt="Photo de {{ instructor.user.get_full_name }}" class="rounded-circle" style="width: 50px; height: 50px; object-fit: cover;" />
                  {% else %}
                    {# Icône de remplacement si pas de photo. Assurez-vous d'avoir Font Awesome. #}
                    <i class="fas fa-user-circle fa-2x text-muted"></i>
                  {% endif %}
                </td>
                <td>
                  {# Nom complet. Utilise get_full_name pour la robustesse. #}
                  {{ instructor.user.get_full_name }}
                </td>
                <td>{{ instructor.CustomUser.email }}</td>
                <td>
                  {# Affiche la spécialité ou un tiret si vide #}
                  {{ instructor.specialite_enseignement|default:'-' }}
                </td>
                <td class="text-center">
                  {# Lien vers la page de détail du formateur #}
                  <a href="{% url 'gestion_users:formateur_detail' pk=instructor.pk %}" class="btn btn-sm btn-info"><i class="fas fa-eye me-1"></i> Voir Profil</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="alert alert-warning" role="alert">
        <i class="fas fa-exclamation-triangle me-2"></i> Aucun formateur n'est actuellement enregistré dans le système.
      </div>
    {% endif %}
  </div>
{% endblock %}
