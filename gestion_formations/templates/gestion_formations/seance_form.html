{# cree ou modifier une seance #} {% extends 'base.html' %}
{% block content %}
  <div class="container mt-4">
    <h2>
      {% if object %}
        Modifier
      {% else %}
        CrÃ©er
      {% endif %}une SÃ©ance
    </h2>
    <form method="post">
      {% csrf_token %}

      {# ðŸ›‘ EMPLACEMENT POUR LE CHAMP SESSION VISIBLE ðŸ›‘ #}
      <div class="mb-3">
        {{ form.session.label_tag }}
        {{ form.session }}
        {% if form.session.errors %}
          <div class="invalid-feedback d-block">{{ form.session.errors }}</div>
        {% endif %}
      </div>

      {% if form.non_field_errors %}
        <div class="alert alert-danger">
          {% for error in form.non_field_errors %}
            {{ error }}
          {% endfor %}
        </div>
      {% endif %}

      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            {{ form.date.label_tag }} {{ form.date }} {% if form.date.errors %}
              <div class="invalid-feedback d-block">{{ form.date.errors }}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            {{ form.heure_debut.label_tag }} {{ form.heure_debut }} {% if form.heure_debut.errors %}
              <div class="invalid-feedback d-block">{{ form.heure_debut.errors }}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            {{ form.heure_fin.label_tag }} {{ form.heure_fin }} {% if form.heure_fin.errors %}
              <div class="invalid-feedback d-block">{{ form.heure_fin.errors }}</div>
            {% endif %}
          </div>
        </div>

        <div class="col-md-6">
          <div class="mb-3">
            {{ form.instructor.label_tag }} {{ form.instructor }} {% if form.instructor.errors %}
              <div class="invalid-feedback d-block">{{ form.instructor.errors }}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            {{ form.room.label_tag }}
            {{ form.room }}
            {% if form.room.errors %}
              <div class="invalid-feedback d-block">{{ form.room.errors }}</div>
            {% endif %}
          </div>

          <div class="mb-3">{{ form.sujet_aborde.label_tag }} {{ form.sujet_aborde }}</div>
        </div>
      </div>

      <div class="mb-3">{{ form.note_seance.label_tag }} {{ form.note_seance }}</div>

      <div class="mb-3 form-check">{{ form.est_annulee }} {{ form.est_annulee.label_tag }}</div>

      <button type="submit" class="btn btn-primary">Enregistrer</button>
      {% if object %}
        {# Cas 1: Modification. L'objet existe, on rÃ©cupÃ¨re sa session. #}
        <a href="{% url 'gestion_formations:session_detail' pk=object.session.pk %}" class="btn btn-secondary">Annuler</a>
      {% else %}
        {# Cas 2: CrÃ©ation. L'objet n'existe pas, on utilise la PK de la session passÃ©e par la vue. #}
        <a href="{% url 'gestion_formations:session_detail' pk=session_pk %}" class="btn btn-secondary">Annuler</a>
      {% endif %}
    </form>
  </div>
{% endblock %}
